# CHAPTER 2

### 인터페이스를 사용하는 프로그래밍

자바 인터페이스는 구현 클래스가 준수해야 하는 계약을 정의한다. 클래스가 의존 관계를 구현하는 인터페이스에 의존한다면, 해당 의존 관계의 구현을 바꾸더라도 의존 중인 클래스를 변경할 필요가 없다.  의존 중인 클래스가 의존 관계가 구현하는 인스턴스로 의존성을 만드는 설계 원칙을 인터페이스를 사용하는 프로그래밍이다. 인터페이스를 사용하는 프로그래밍은 의존 중인 클래스와 의존 관계 사이에 느슨한 결합을 만든다.

### 생성자 기반 DI

생성자 인수로 의존 관계를 전달하는 DI 기법이다.

```java
public class A{
	private JmsMessageSender jms;
	
	public A(JmsMessageSender jms){
		this.jms = jms;
	}
}
```

### 세터 기반 DI

세터메서드로 의존 관계를 주입하는 DI 기법이다.

```java
public class B{
	private JmsMessageSender jms;

	public void setJmsMessageSender(JmsMessageSender jms){
		this.jms = jms;
	} 
}
```

### 빈 스코프

빈을 공유하기 위한 인스턴스를 하나만 만들지, 빈이 요청될 때마다 새로운 빈 인스턴스를 생성할지 여부를 제어하기 위해 빈의 스코프를 지정할 수 있다. 스코프를 지정하지 않으면 그 빈은 싱글턴 스코프로 지정된다.

### 싱글턴

싱글턴 스코프는 xml파일에 정의된 모든 빈의 디폴트 스코프이다. 싱글턴 스코프 빈의 인스턴스는 스프링 컨테이너가 생성될 때 함께 생성되고, 스프링 컨테이너가 파괴될 때 같이 파괴된다.  스프링 컨테이너는 싱글턴 스코프 빈의 인스턴스를 한 개만 만들고, 그 빈에 의존하는 모든 빈에 유일한 인스턴스를 공유한다.

### 프로토타입

프로토타입 스코프 빈은 스프링 컨테이너가 항상 프로토 타입 스코프 빈의 새로운 인스턴스를 반환한다. 프로토타입 빈이 항상 지연 초기화된다.