# CHAPTER 11

### AOP

관점 지향 프로그래밍은 여러 클래스에 나뉜 책임을 애스팩트라고 부르는 클래스에 캡슐화하는 접근 방식이다. 여러 클래스에 걸쳐 있는 책임은 횡단 관심사라고 부른다. 횡단 관심사의 예시로는 로깅, 트랜잭션 관리, 캐싱, 보안 등을 들 수 있다.

### 스프링 AOP 프레임워크

스프링 AOP 프레임워크는 프록시 기반이기 때문에 어드바이스의 대상 객체마다 프록시 객체가 만들어진다.  프록시는 AOP 프레임워크에 의해 호출하는 객체와 대상 객체 사이에 도입되는 중간 객체다.  실행 시점에서 프록시는 대상 객체 호출을 가로채고 대상 메서드에 적용할 어드바이스를 실행한다.

프록시 생성

스프링 AOP를 사용할 때는 스프링의 ProxyFactoryBean을 사용해 AOP 프록시를 명시적으로 사용할 수 있고, 스프링이 AOP 프록시를 자동으로 생성하게 만들 수도 있다. AOP 프록시를 스프링 AOP가 자동으로 생성하는 경우를 자동 프록시 생성이라고 한다.

### 어드바이스 유형

어드바이스는 횡단 관심에 해당하는 공통 기능의 코드를 의미하며, 독립된 클래스의 메소드로 작성된다.

- before 어드바이스

대상 메서드가 실행되기 전에 실행된다. 예외를 던지지 않으면 대상 메서드가 항상 실행된다.

- after returning 어드바이스

대상 메서드가 반환된 다음에 실행된다. 대상 메서드가 예외를 발생시키면 after returning 어드바이스가 실행되지 않는다.

- after throwing 어드바이스

대상메서드가 예외를 던질 때 실행된다. 대상 메서드가 던진 예외에 접근할 수 있다.

- after 어드바이스

대상 메서드가 실행된 다음에 실행된다. 이때 대상 메서드가 정상적으로 끝났는지 예외를 던졌는지는 상관없다.

- around 어드바이스

대상 메서드가 실행되기 전과 후에 실행된다. 다른 어드바이스와 달리 around 어드바이스는 대상 메서드의 호출 여부를 결정할 수 있다.